<html>
<head>
	<!-- <meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> -->
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
 <script type="text/javascript" src="js/markerclusterer_compiled.js"></script>
 	<script type="text/javascript">

// 'lat': 22.0757222222,'lng':121.5370555556
// 'lat': 22.0758055556,'lng':121.5370277778
// 'lat': 22.07825,'lng':121.5622222222
// 'lat': 22.0740555556,'lng':121.5385277778
// 'lat': 22.0740555556,'lng':121.5384722222
// 'lat': 22.0758055556,'lng':121.5370833333
// v22.0758055556,'lng':121.5370833333
	var locations = [
	{'id': 1, 'name': 'Gold Standard', 'description': 'Great little cafe, brews La Colombe coffee, free wifi',  'lat': 22.0757222222,'lng':121.5370555556 },	
	{'id': 2, 'name': 'Green Line Cafe', 'description': 'Nice cafe by Clark Park. Killer chocolate croissants', 'lat': 22.0758055556,'lng':121.5370277778 },	
	{ 'id': 3, 'name': 'Mugshots', 'description': 'No free wifi, but great coffee, atmosphere, and local food.', 'lat': 22.07825,'lng':121.5622222222 }
	];

	var markers = [];
	var map;
	var infoWindow ;
// var msOverImg = 'images/marker4.png';
var msOverImg ; 
var msOutImg ; 

function initialize() {
	 infoWindow = new google.maps.InfoWindow;
// var msOverImg = 'images/marker4.png';
 	msOverImg = new google.maps.MarkerImage(
	"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|FFFF00",
	null, /* size is determined at runtime */
	null, /* origin is 0,0 */
	null, /* anchor is bottom center of the scaled image */
	new google.maps.Size(42, 68)
	); 
	msOutImg = new google.maps.MarkerImage(
	"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|FF0000",
	null, /* size is determined at runtime */
	null, /* origin is 0,0 */
	null, /* anchor is bottom center of the scaled image */
	new google.maps.Size(42, 68)
	); 

	var myLatlng = new google.maps.LatLng(22.07825,121.5622222222);
	var myOptions = {
		zoom: 13,
		center: myLatlng,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	}
	map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
	
	for(id in locations) {
		initializePoint(locations[id]);
	}
	 var markerCluster = new MarkerClusterer(map, markers);
}	

function initializePoint(pointData) {
	var pointLatLng = new google.maps.LatLng(pointData.lat, pointData.lng);

	var marker = new google.maps.Marker({
		position: pointLatLng, 
		map: map, 
		title: pointData.name,
		icon:msOverImg
	});
	
	var html = "<div class='infowin'><strong>" + pointData.id +" " +pointData.name + "</strong><hr>";
	html = html + pointData.description;
	
  	//binds the infoWindow to the point
  	bindInfoWindow(marker, map, infoWindow, html);

  	//drawing the marker
  	marker.setMap(map); 

  	 markers.push(marker); //charlene
  }

  function bindInfoWindow(marker, map, infoWindow, html) {
  	google.maps.event.addListener(marker, 'mouseover', function() {
  		infoWindow.setContent(html);
  		infoWindow.open(map, marker);
  		marker.setIcon(msOutImg);
  	});
  	google.maps.event.addListener(marker, 'mouseout', function() {
  		infoWindow.close();
  		marker.setIcon(msOverImg);
  	});
  }

  </script>
</head>
<body onload="initialize()">
	<div id="map_canvas" style="width:80%; height:80%"></div>
</body>
</html>